<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>KDD'22 Cam_Traj_Rec文献阅读与复现 | Levi's Blog</title><meta name="author" content="Levi Ashmore"><meta name="copyright" content="Levi Ashmore"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="KDD’22 Cam_Traj_Rec  论文简介  Fudan Yu∗, Wenxuan Ao∗, Huan Yan†, Guozhen Zhang, Wei Wu, and Yong Li. 2022. Spatio-Temporal Vehicle Trajectory Recovery on Road Network Based on Traffic Camera Video Data.">
<meta property="og:type" content="article">
<meta property="og:title" content="KDD&#39;22 Cam_Traj_Rec文献阅读与复现">
<meta property="og:url" content="https://ashmorelevi.github.io/2022/10/16/KDD-22-Cam-Traj-Rec%E6%96%87%E7%8C%AE%E9%98%85%E8%AF%BB%E4%B8%8E%E5%A4%8D%E7%8E%B0/index.html">
<meta property="og:site_name" content="Levi&#39;s Blog">
<meta property="og:description" content="KDD’22 Cam_Traj_Rec  论文简介  Fudan Yu∗, Wenxuan Ao∗, Huan Yan†, Guozhen Zhang, Wei Wu, and Yong Li. 2022. Spatio-Temporal Vehicle Trajectory Recovery on Road Network Based on Traffic Camera Video Data.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ashmorelevi.github.io/img/Cover/5.png">
<meta property="article:published_time" content="2022-10-16T12:12:27.000Z">
<meta property="article:modified_time" content="2022-11-23T12:11:34.549Z">
<meta property="article:author" content="Levi Ashmore">
<meta property="article:tag" content="文献阅读">
<meta property="article:tag" content="轨迹恢复">
<meta property="article:tag" content="Trajectory Recovery">
<meta property="article:tag" content="Urban Computing">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ashmorelevi.github.io/img/Cover/5.png"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://ashmorelevi.github.io/2022/10/16/KDD-22-Cam-Traj-Rec%E6%96%87%E7%8C%AE%E9%98%85%E8%AF%BB%E4%B8%8E%E5%A4%8D%E7%8E%B0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'KDD\'22 Cam_Traj_Rec文献阅读与复现',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-23 20:11:34'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/Avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fa-solid fa-images"></i><span> Gallery</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-music"></i><span> Music</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fa-solid fa-headphones-simple"></i><span> Favorite</span></a></li><li><a class="site-page child" href="/music/instrumental/"><i class="fa-fw fa-solid fa-guitar"></i><span> Instrumental</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/About/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/Cover/5.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Levi's Blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fa-solid fa-images"></i><span> Gallery</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-music"></i><span> Music</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fa-solid fa-headphones-simple"></i><span> Favorite</span></a></li><li><a class="site-page child" href="/music/instrumental/"><i class="fa-fw fa-solid fa-guitar"></i><span> Instrumental</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/About/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">KDD'22 Cam_Traj_Rec文献阅读与复现</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-10-16T12:12:27.000Z" title="发表于 2022-10-16 20:12:27">2022-10-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-23T12:11:34.549Z" title="更新于 2022-11-23 20:11:34">2022-11-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Trajectory-Recovery/">Trajectory Recovery</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">1.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>5分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="KDD'22 Cam_Traj_Rec文献阅读与复现"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>KDD’22 Cam_Traj_Rec</h1>
<hr>
<h2 id="论文简介">论文简介</h2>
<blockquote>
<p>Fudan Yu∗, Wenxuan Ao∗, Huan Yan†, Guozhen Zhang, Wei Wu, and Yong Li. 2022. Spatio-Temporal Vehicle Trajectory Recovery on Road Network Based on Traffic Camera Video Data. In Proceedings of the 28th ACM SIGKDD Conference on Knowledge Discovery and Data Mining (KDD ’22), August 14–18, 2022, Washington, DC, USA. ACM, New York, NY, USA, 9 pages. <a target="_blank" rel="noopener" href="https://doi.org/10.1145/3534678.3539186">https://doi.org/10.1145/3534678.3539186</a></p>
</blockquote>
<h2 id="复现细节">复现细节</h2>
<h3 id="文件结构">文件结构</h3>
<h3 id="数据文件">数据文件</h3>
<h4 id="camera-info-pkl">camera_info.pkl</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class: list</span><br><span class="line">len(): 147</span><br><span class="line"># 例：000: &#123;&#x27;id&#x27;:0, &#x27;node_id&#x27;:1228&#125;</span><br><span class="line"># 有一部分的id前带有&#x27;camera&#x27;</span><br></pre></td></tr></table></figure>
<h4 id="road-graph-pkl">road_graph.pkl</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="records-100w-pca-64-pkl">records_100w_pca_64.pkl</h4>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span>: <span class="built_in">list</span></span><br><span class="line"><span class="built_in">len</span>(): <span class="number">999654</span></span><br><span class="line"><span class="comment"># 例：&#123;</span></span><br><span class="line">    <span class="string">&#x27;vehicle_id&#x27;</span>: <span class="literal">None</span>, </span><br><span class="line">    <span class="string">&#x27;camera_id&#x27;</span>: <span class="number">88</span>, </span><br><span class="line">    <span class="string">&#x27;car_feature&#x27;</span>: array([-<span class="number">3.5037674e-02</span>, -<span class="number">1.5768880e-02</span>,  <span class="number">4.0063962e-02</span>,  <span class="number">6.2312847e-03</span>,</span><br><span class="line">       -<span class="number">5.0646484e-02</span>, -<span class="number">3.4165952e-02</span>, -<span class="number">7.1852408e-02</span>,  <span class="number">4.0639136e-03</span>,</span><br><span class="line">       -<span class="number">1.2009477e-04</span>, -<span class="number">4.3527661e-03</span>, -<span class="number">2.4399173e-02</span>, -<span class="number">3.6135782e-02</span>,</span><br><span class="line">        <span class="number">1.9503264e-02</span>, -<span class="number">3.9249066e-02</span>,  <span class="number">9.6481234e-02</span>, -<span class="number">8.6406693e-02</span>,</span><br><span class="line">       -<span class="number">1.0230435e-02</span>, -<span class="number">1.3215089e-01</span>,  <span class="number">5.0576232e-02</span>, -<span class="number">1.9055100e-02</span>,</span><br><span class="line">       -<span class="number">3.0239424e-02</span>, -<span class="number">6.1923801e-04</span>,  <span class="number">5.0271440e-02</span>, -<span class="number">2.4731858e-02</span>,</span><br><span class="line">       -<span class="number">1.0424526e-03</span>,  <span class="number">5.6518514e-02</span>,  <span class="number">2.6984716e-02</span>, -<span class="number">2.4589464e-02</span>,</span><br><span class="line">        <span class="number">2.5609093e-02</span>, -<span class="number">9.6780574e-03</span>, -<span class="number">1.8288985e-02</span>,  <span class="number">3.2427087e-02</span>,</span><br><span class="line">       -<span class="number">3.6027280e-03</span>, -<span class="number">3.3669520e-02</span>,  <span class="number">2.9647321e-02</span>, -<span class="number">2.9521914e-02</span>,</span><br><span class="line">        <span class="number">1.0191399e-02</span>, -<span class="number">3.7233617e-02</span>,  <span class="number">4.1315429e-02</span>,  <span class="number">1.1902056e-02</span>,</span><br><span class="line">       -<span class="number">3.7582777e-02</span>, -<span class="number">1.0578616e-02</span>, -<span class="number">3.4287002e-02</span>, -<span class="number">7.5835055e-03</span>,</span><br><span class="line">       -<span class="number">4.2379178e-02</span>,  <span class="number">5.1208910e-02</span>, -<span class="number">2.2433985e-02</span>,  <span class="number">8.7926164e-02</span>,</span><br><span class="line">       -<span class="number">9.3611227e-03</span>,  <span class="number">7.7165209e-02</span>, -<span class="number">8.2266703e-03</span>, -<span class="number">3.7514783e-02</span>,</span><br><span class="line">       -<span class="number">7.8368120e-02</span>, -<span class="number">1.3725712e-02</span>, -<span class="number">3.1114252e-02</span>,  <span class="number">1.7932989e-02</span>,</span><br><span class="line">       -<span class="number">2.8715754e-02</span>,  <span class="number">2.8470850e-02</span>,  <span class="number">2.3698460e-03</span>, -<span class="number">3.4678895e-02</span>,</span><br><span class="line">       -<span class="number">2.4395386e-02</span>, -<span class="number">1.6717903e-02</span>,  <span class="number">8.4505491e-03</span>, -<span class="number">2.4319584e-02</span>],</span><br><span class="line">      dtype=float32), </span><br><span class="line">    <span class="string">&#x27;plate_feature&#x27;</span>: <span class="literal">None</span>, </span><br><span class="line">    <span class="string">&#x27;plate_text&#x27;</span>: <span class="literal">None</span>, </span><br><span class="line">    <span class="string">&#x27;time&#x27;</span>: <span class="number">67032</span>, </span><br><span class="line">    <span class="string">&#x27;record_id&#x27;</span>: <span class="number">3701679</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment"># car_feature的size为64    </span></span><br></pre></td></tr></table></figure>
<h4 id="matched-traj-pkl">matched_traj.pkl</h4>
<blockquote>
<p>A data format example for “matched_traj.pkl”<br>
The file “matched_traj.pkl” which is readed in “calculate_speed.py” is the map-matched historical trajectories.<br>
It also involves original GPS points thus is not open access.<br>
If you’ re interested in running “calculate_speed.py”, you have to prepare your map-matched trajectories.<br>
Here shows the data format of each item in “matched_traj.pkl” for your convenience.</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">lon, lat = 111, 22</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"> &#x27;index&#x27;: 64074,</span><br><span class="line"> &#x27;path&#x27;: [</span><br><span class="line">          [901,   # 路网中的edge_id, 匹配路径的第一条路</span><br><span class="line">           [      # 匹配到这条路上的所有轨迹点</span><br><span class="line">            &#123;&#x27;order&#x27;: 0,  # 轨迹点在原始经纬度轨迹中的索引</span><br><span class="line">             &#x27;orig_point&#x27;: [lon, lat, 6467.0],  # 原始轨迹点[lon, lat, t]</span><br><span class="line">             &#x27;point&#x27;: [lon, lat, 6467.0]&#125;,      # 匹配后投影到路上的轨迹点</span><br><span class="line">            &#123;&#x27;order&#x27;: 1,</span><br><span class="line">             &#x27;orig_point&#x27;: [lon, lat, 6478.0],</span><br><span class="line">             &#x27;point&#x27;: [lon, lat, 6478.0]&#125;,</span><br><span class="line">            &#123;&#x27;order&#x27;: 2,</span><br><span class="line">             &#x27;orig_point&#x27;: [lon, lat, 6547.0],</span><br><span class="line">             &#x27;point&#x27;: [lon, lat, 6547.0]&#125;</span><br><span class="line">           ]      </span><br><span class="line">          ],</span><br><span class="line">          [325,   # 路网中的edge_id, 匹配路径的第二条路</span><br><span class="line">           [</span><br><span class="line">            &#123;&#x27;order&#x27;: 3,</span><br><span class="line">             &#x27;orig_point&#x27;: [lon, lat, 6557.0],</span><br><span class="line">             &#x27;point&#x27;: [lon, lat, 6557.0]&#125;,</span><br><span class="line">            &#123;&#x27;order&#x27;: 4,</span><br><span class="line">             &#x27;orig_point&#x27;: [lon, lat, 6567.0],</span><br><span class="line">             &#x27;point&#x27;: [lon, lat, 6567.0]&#125;,</span><br><span class="line">            &#123;&#x27;order&#x27;: 5,</span><br><span class="line">             &#x27;orig_point&#x27;: [lon, lat, 6578.0],</span><br><span class="line">             &#x27;point&#x27;: [lon, lat, 6578.0]&#125;</span><br><span class="line">           ]</span><br><span class="line">          ]</span><br><span class="line">        ],</span><br><span class="line"> &#x27;start_end_portion&#x27;: (</span><br><span class="line">    0.1663753030146705,  # 第一条路被通过的比例(即第一条路上, 第一个轨迹点及之后的部分的占比)</span><br><span class="line">    0.5463860908881429   # 最后一条路被通过的比例(即最后一条路上, 最后一个轨迹点及之前的部分的占比)</span><br><span class="line">  )  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="run-py运行过程">run.py运行过程</h3>
<h4 id="整体迭代过程">整体迭代过程</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">---------- iter 0 -----------</span><br><span class="line">clustering...</span><br><span class="line">2022-10-12 15:01:32.845 INFO Normalize</span><br><span class="line">100%|█████████████████████| 999654/999654 [00:21&lt;00:00, 45754.56it/s]</span><br><span class="line">2022-10-12 15:01:54.694 INFO Search topk</span><br><span class="line">2022-10-12 15:04:05.015 INFO Clustering</span><br><span class="line">100%|█████████████████████| 999654/999654 [08:45&lt;00:00, 1902.23it/s]</span><br><span class="line">2022-10-12 15:12:50.544 INFO done</span><br><span class="line">clustering consume time: 686.0012559890747</span><br><span class="line">------------------</span><br><span class="line">clusters: 435545</span><br><span class="line">precision: 0.8620717334683076</span><br><span class="line">recall:    0.797085689430187</span><br><span class="line">fscore:    0.8283060165176034</span><br><span class="line">expansion: 3.8071065989847717</span><br><span class="line">------------------</span><br><span class="line">cluster merging...</span><br><span class="line">merging consume time: 118.32811117172241</span><br></pre></td></tr></table></figure>
<p>先通过SigCluster进行聚类操作</p>
<h4 id="SigCluster类">SigCluster类</h4>
<p>通过FlatSearcher指定好GPU相关后，通过进入fit()函数，获取到cluster的结果。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">fit(</span><br><span class="line">        self,</span><br><span class="line">        data,</span><br><span class="line">        initial_labels=None,</span><br><span class="line">        weights=[0.1, 0.9],</span><br><span class="line">        similarity_threshold=0.88,</span><br><span class="line">        topK=128,</span><br><span class="line">        normalized=True,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">labels = cluster.fit(</span><br><span class="line">                [[a, b, c] for a, b, c in zip(f_car, f_plate, f_emb)], # data，其len为999654</span><br><span class="line">                weights=[0.1, 0.8, 0.1], # 每个特征赋予一个权重</span><br><span class="line">                similarity_threshold=s, # 相似度阈值，大于这个阈值的就被聚类为一类</span><br><span class="line">                topK=topK,# 聚类搜索时搜索topK项</span><br><span class="line">            )    </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>特征的维度为[64,64,64]，即通过将car_feature、plate_feature、plate_text三个维度的数据，进行车辆聚类。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f_car = [x[&quot;car_feature&quot;] for x in records]</span><br><span class="line">f_plate = [x[&quot;plate_feature&quot;] for x in records]</span><br><span class="line">f_emb = deepcopy(f_car)</span><br></pre></td></tr></table></figure>
<p>data_:将data转化为3个维度，每个维度999654条数据，即相当于解压成3个特征</p>
<p>对于data_中的某个特征维度i，再解压为f特征和f_id特征序号</p>
<p>循环结束后分别加入到fs（3*特征总数*特征维数64）与f_ids（3*特征总数）</p>
<p>f_topks内：对于每个特征的向量，找最相似的128个向量（这个过程非常耗时，运算维度很大）</p>
<p>运算好后的f_topks:(3*特征总数，每个特征后求出相似度在前128的其他特征)</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://ashmorelevi.github.io">Levi Ashmore</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://ashmorelevi.github.io/2022/10/16/KDD-22-Cam-Traj-Rec%E6%96%87%E7%8C%AE%E9%98%85%E8%AF%BB%E4%B8%8E%E5%A4%8D%E7%8E%B0/">https://ashmorelevi.github.io/2022/10/16/KDD-22-Cam-Traj-Rec%E6%96%87%E7%8C%AE%E9%98%85%E8%AF%BB%E4%B8%8E%E5%A4%8D%E7%8E%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://ashmorelevi.github.io" target="_blank">Levi's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%96%87%E7%8C%AE%E9%98%85%E8%AF%BB/">文献阅读</a><a class="post-meta__tags" href="/tags/%E8%BD%A8%E8%BF%B9%E6%81%A2%E5%A4%8D/">轨迹恢复</a><a class="post-meta__tags" href="/tags/Trajectory-Recovery/">Trajectory Recovery</a><a class="post-meta__tags" href="/tags/Urban-Computing/">Urban Computing</a></div><div class="post_share"><div class="social-share" data-image="/img/Cover/5.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/11/23/Hexo-Butterfly-Theme%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"><img class="prev-cover" src="/img/Cover/1.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Hexo-Butterfly-Theme博客搭建</div></div></a></div><div class="next-post pull-right"><a href="/2022/09/27/Markdown%E8%AF%AD%E6%B3%95%E4%B8%8EKatex%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/"><img class="next-cover" src="/img/Cover/4.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Markdown语法与Katex数学公式</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/06/22/FGVC%EF%BC%9ARA-CNN/" title="CVPR&#39;2017 Recurrent FGVC-RA-CNN"><img class="cover" src="/img/Cover/13.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-22</div><div class="title">CVPR&#39;2017 Recurrent FGVC-RA-CNN</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/Avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Levi Ashmore</div><div class="author-info__description">爱即自由。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/AshmoreLevi" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1069696543@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://www.instagram.com/ashmore0503/" target="_blank" title="Instagram"><i class="fa-brands fa-instagram"></i></a><a class="social-icon" href="https://weibo.com/u/1939178433" target="_blank" title="Weibo"><i class="fa-brands fa-weibo"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This site has been updated to the Butterfly Theme. Now support the gallery, the music and the comment function!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">KDD’22 Cam_Traj_Rec</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BA%E6%96%87%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">论文简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E7%8E%B0%E7%BB%86%E8%8A%82"><span class="toc-number">1.2.</span> <span class="toc-text">复现细节</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.1.</span> <span class="toc-text">文件结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.2.</span> <span class="toc-text">数据文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#camera-info-pkl"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">camera_info.pkl</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#road-graph-pkl"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">road_graph.pkl</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#records-100w-pca-64-pkl"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">records_100w_pca_64.pkl</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#matched-traj-pkl"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">matched_traj.pkl</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#run-py%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-number">1.2.3.</span> <span class="toc-text">run.py运行过程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B4%E4%BD%93%E8%BF%AD%E4%BB%A3%E8%BF%87%E7%A8%8B"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">整体迭代过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SigCluster%E7%B1%BB"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">SigCluster类</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/09/01/2023-08/" title="2023-08"><img src="/gallery/WuHan/1.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2023-08"/></a><div class="content"><a class="title" href="/2023/09/01/2023-08/" title="2023-08">2023-08</a><time datetime="2023-09-01T07:09:04.000Z" title="发表于 2023-09-01 15:09:04">2023-09-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/03/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%A4%8D%E4%B9%A0%E4%B8%8E%E8%80%83%E8%AF%95%E6%80%BB%E7%BB%93/" title="大数据分析复习与考试总结"><img src="/img/Cover/6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="大数据分析复习与考试总结"/></a><div class="content"><a class="title" href="/2022/12/03/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%A4%8D%E4%B9%A0%E4%B8%8E%E8%80%83%E8%AF%95%E6%80%BB%E7%BB%93/" title="大数据分析复习与考试总结">大数据分析复习与考试总结</a><time datetime="2022-12-03T14:36:37.000Z" title="发表于 2022-12-03 22:36:37">2022-12-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/24/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%A4%8D%E4%B9%A0%E4%B8%8E%E8%80%83%E8%AF%95%E6%80%BB%E7%BB%93/" title="图像处理复习与考试总结"><img src="/img/Cover/3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="图像处理复习与考试总结"/></a><div class="content"><a class="title" href="/2022/11/24/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%A4%8D%E4%B9%A0%E4%B8%8E%E8%80%83%E8%AF%95%E6%80%BB%E7%BB%93/" title="图像处理复习与考试总结">图像处理复习与考试总结</a><time datetime="2022-11-24T08:15:41.000Z" title="发表于 2022-11-24 16:15:41">2022-11-24</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/footer_bg.jpeg')"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2023 By Levi Ashmore</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://ashmorelevi.github.io">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script><script>function loadWaline () {
  function insertCSS () {
    const link = document.createElement("link")
    link.rel = "stylesheet"
    link.href = "https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.css"
    document.head.appendChild(link)
  }

  function initWaline () {
    const waline = Waline.init(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://waline-bdc98jpi3-ashmorelevi.vercel.app',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      path: window.location.pathname,
      comment: false,
    }, null))
  }

  if (typeof Waline === 'function') initWaline()
  else {
    insertCSS()
    getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js').then(initWaline)
  }
}

if ('Waline' === 'Waline' || !true) {
  if (true) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
  else setTimeout(loadWaline, 0)
} else {
  function loadOtherComment () {
    loadWaline()
  }
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>